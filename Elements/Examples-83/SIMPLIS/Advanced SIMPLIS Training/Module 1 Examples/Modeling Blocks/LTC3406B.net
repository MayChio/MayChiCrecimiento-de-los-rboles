* D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B.sxcmp
*#SIMETRIX
.NODE_MAP VFB 23
.NODE_MAP RUN 26
.NODE_MAP CLK 21
.NODE_MAP VIN 22
.NODE_MAP GND 24
.NODE_MAP SW 25
.PRINT V(#CLK)
.GRAPH :#CLK axisType="digital" persistence=1 graphName="clock" curveLabel="CLK" analysis="tran|pop" xLog="auto" yLog="auto"  nowarn=true  
.PRINT V(#VFB)
.GRAPH :#VFB axisType="auto" persistence=1 graphName="clock" curveLabel="VFB" analysis="tran|pop" xLog="auto" yLog="auto"  nowarn=true  
.PRINT V(11)
.GRAPH :11 axisType="auto" persistence=1 graphName="clock" curveLabel="U5-SLOPE" analysis="tran|pop" xLog="auto" yLog="auto"  nowarn=true  
.PRINT V(9)
.GRAPH :9 axisType="digital" persistence=1 graphName="Clock" curveLabel="U4-RUN_INT" analysis="tran|pop" xLog="auto" yLog="auto"  nowarn=true  
X$U1 24 9 21 23 10 11 LTC3406B_OSC
X$U2 24 19 26 22 15 9 LTC3406B_VREF
X$U3 24 17 15 22 23 LTC3406B_EAMP
X$U4 24 19 21 12 23 9 16 LTC3406B_SW_LOGIC
X$U5 24 16 17 22 21 14 11 LTC3406B_ICOMP
X$U6 24 12 22 20 18 25 LTC3406B_DRIVER
X$U7 25 18 14 LTC3406B_PFET
X$U8 24 20 25 LTC3406B_NFET
X1 12 13 PERIODIC_OP vars: 
** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_SW_LOGIC.sxcmp
.subckt LTC3406B_SW_LOGIC 19 17 13 15 16 18 14
*#hierarchy
.NODE_MAP FB 16
.NODE_MAP RUN_INT 18
.NODE_MAP HS_DRV_ON 15
.NODE_MAP CLK 13
.NODE_MAP V_OVL 17
.NODE_MAP iCOMP 14
.NODE_MAP GND 19
X$U_OVDET 10 12 19 16 17 SIMPLIS_LOGIC_BB_COMP vars: IC=0 RIN=100Meg ROUT=10 HYSTWD=2m VOL=0 VOH=5 DELAY=0
X$U_PWM_RESET 8 11 19 14 10 18 SIMPLIS_LOGIC_BB_OR3 vars: NumInv=1 IC=0 RIN=10Meg ROUT=10 HYSTWD=1 VOL=0 VOH=5 DELAY=0 TH=2.5
X$U_PWM_RS_LATCH 15 9 19 13 8 SIMPLIS_LOGIC_BB_SRFF vars: DomType='None' IC=0 RIN=10Meg ROUT=10 HYSTWD=1 VOL=0 VOH=5 DELAY=0 TH=2.5
.ends LTC3406B_SW_LOGIC

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_VREF.sxcmp
.subckt LTC3406B_VREF 17 14 15 12 16 13
*#hierarchy
.NODE_MAP RUN 15
.NODE_MAP V_REF 16
.NODE_MAP RUN_INT 13
.NODE_MAP VIN 12
.NODE_MAP V_OVL 14
.NODE_MAP GND 17
C_RUN 7 17 10n
E_RUN_BUF 10 17 9 17 1
E_RUN_OV 14 17 7 17 1.078 
E_RUN_VREF 16 17 7 17 1
G1 17 9 11 17 1
R_RUN1 11 17 1Meg
R_RUN2 10 7 1K
!R$R_RUN_VREF 9 17 R_RUN_VREF$TP_SSPWLR IC=2 
.MODEL R_RUN_VREF$TP_SSPWLR VPWLR NSEG=2 X0=0 Y0=0 X1=0.6 Y1=0.8 X2=0.6001 Y2=6.8 
X$S_RUN_IBIAS 12 17 13 17 SIMPLIS_VC_SWITCH vars: ROFF=10Meg RON=20k THRESHOLD=2.5 HYSTWD=1 IC='CLOSE' LOGIC='POS'
X$S_RUN_VREF 12 11 13 17 SIMPLIS_VC_SWITCH vars: ROFF=1G RON=10k THRESHOLD=2.5 HYSTWD=1 IC='CLOSE' LOGIC='POS'
X$U_RUN_COMP1 13 17 15 8 SIMPLIS_COMP vars: IC=1 RIN=100Meg ROUT=10 HYSTWD=1.2 VOL=0 VOH=5 DELAY=0
V_RUN_MID 8 17 0.9
.ends LTC3406B_VREF

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_OSC.sxcmp
.subckt LTC3406B_OSC 24 20 21 25 23 26
*#hierarchy
.NODE_MAP OSC_RAMP 22
.NODE_MAP SLOPE 26
.NODE_MAP FB 25
.NODE_MAP RUN_INT 20
.NODE_MAP RAMP 23
.NODE_MAP CLK 21
.NODE_MAP GND 24
C_OSC 22 24 1n IC=1.001
C_SLOPE 19 24 1n IC=0
E1 23 24 22 24 1
E2 18 24 17 24 215u
E3 26 24 19 24 1 
G1 22 24 13 24 15m
G2 24 22 16 24 1
G3 24 17 25 24 1
G4 24 19 18 24 1
!R$R_OSC_DCH 17 24 R_OSC_DCH$TP_SSPWLR IC=1 
.MODEL R_OSC_DCH$TP_SSPWLR VPWLR NSEG=2 X0=1 Y0=0 X1=7.14 Y1=0.6 X2=7.141 Y2=1 
X$S_OSC_DISABLE 22 24 20 24 SIMPLIS_VC_SWITCH vars: ROFF=1G RON=1 THRESHOLD=2.5 HYSTWD=1 IC='OPEN' LOGIC='NEG'
X$S_OSC_SLOPE 19 24 23 24 SIMPLIS_VC_SWITCH vars: ROFF=1G RON=100m THRESHOLD=400m HYSTWD=2m IC='OPEN' LOGIC='NEG'
X$U1 16 24 18 15 SIMPLIS_SWITCH_VCVS_BB vars: THRESHOLD=2.5 HYSTWD=1 IC=0 LOGIC='POS'
X$U_OSC_CH 13 24 20 21 SIMPLIS_AND2 vars: 
X$U_OSC_COMP1 21 15 24 22 14 SIMPLIS_LOGIC_BB_COMP vars: IC=0 RIN=10Meg ROUT=10 HYSTWD=1 VOL=0 VOH=5 DELAY=7.5n
V_OSC_MID 14 24 0.501
.ends LTC3406B_OSC

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_EAMP.sxcmp
.subckt LTC3406B_EAMP 11 9 8 7 10
*#hierarchy
.NODE_MAP OUT 9
.NODE_MAP PVCC 7
.NODE_MAP INV 10
.NODE_MAP NVCC 11
.NODE_MAP NINV 8
C1 6 9 5p IC=0
C2 10 9 390f IC=0
R2 6 10 599.2k
X$U1 8 10 7 11 9 PARAM_OPAMP vars: LEVEL=2 VOS=0 IB=10n IBOS=10p A0=100k GBW=10Meg SR_POS=10Meg SR_NEG=10Meg CMRR=100k PSRR=100k RIN=1Meg IO_SRC_MAX=5m IO_SNK_MAX=5m ROUT=100 RO_AC=50 IQ=1m VDIFF_POS=200m VDIFF_NEG=200m
.ends LTC3406B_EAMP

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_ICOMP.sxcmp
.subckt LTC3406B_ICOMP 20 23 22 18 24 21 19
*#hierarchy
.NODE_MAP SLOPE 19
.NODE_MAP EA_OUT 22
.NODE_MAP S_PFET 21
.NODE_MAP CLK 24
.NODE_MAP VIN 18
.NODE_MAP ICOMP 23
.NODE_MAP GND 20
E1 9 10 19 20 1
H_ICOMP 10 20 VH_ICOMP$TP_CCVS 2.5  
VH_ICOMP$TP_CCVS 18 21 0
X$U1 23 14 20 11 13 SIMPLIS_LOGIC_BB_AND2 vars: NumInv=0 IC=0 RIN=10Meg ROUT=10 HYSTWD=1 VOL=0 VOH=5 DELAY=0 TH=2.5
X$U_ICOMP 11 12 20 9 22 SIMPLIS_LOGIC_BB_COMP vars: IC=0 RIN=10Meg ROUT=10 HYSTWD=2M VOL=0 VOH=5 DELAY=0
X$U_LEB_BUF 16 17 20 24 SIMPLIS_LOGIC_BB_BUF vars: IC=0 RIN=10Meg ROUT=10 HYSTWD=1 VOL=0 VOH=5 DELAY=75n TH=2.5
X$U_LEB_SRFF 15 13 20 24 16 SIMPLIS_LOGIC_BB_SRFF vars: DomType='None' IC=0 RIN=10Meg ROUT=10 HYSTWD=1 VOL=0 VOH=5 DELAY=0 TH=2.5
.ends LTC3406B_ICOMP

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_DRIVER.sxcmp
.subckt LTC3406B_DRIVER 25 21 20 23 22 24
*#hierarchy
.NODE_MAP HDRV 22
.NODE_MAP LDRV 23
.NODE_MAP HS_DRV_ON 21
.NODE_MAP VIN 20
.NODE_MAP GND 25
.NODE_MAP SW 24
E1 14 25 20 22 1
X$U_HS_AND 10 12 25 21 11 SIMPLIS_LOGIC_BB_AND2 vars: NumInv=1 IC=0 RIN=10Meg ROUT=10 HYSTWD=200m VOL=0 VOH=5 DELAY=0 TH=2.5
X$U_HS_DRV 20 22 25 10 25 SIMPLIS_TOTEM_OUT2_BB vars: THRESHOLD=2.5 HYSTWD=1 IC=0  VSAT_TOP=1m RSAT_TOP=10 ROFF_TOP=10Meg VSAT_BOT=1m RSAT_BOT=10 ROFF_BOT=10Meg
X$U_IRCMP 16 19 25 24 18 SIMPLIS_LOGIC_BB_COMP vars: IC=0 RIN=10Meg ROUT=10 HYSTWD=400M VOL=0 VOH=5 DELAY=0
X$U_LS_DRV 20 23 25 17 25 SIMPLIS_TOTEM_OUT1_BB vars: THRESHOLD=2.5 HYSTWD=1 IC=0  VSAT_TOP=1m RSAT_TOP=10 ROFF_TOP=10Meg VSAT_BOT=1m RSAT_BOT=10 ROFF_BOT=10Meg
X$U_LS_NOR 13 17 25 21 15 16 SIMPLIS_LOGIC_BB_OR3 vars: NumInv=0 IC=0 RIN=10Meg ROUT=10 HYSTWD=200m VOL=0 VOH=5 DELAY=0 TH=2.5
V_HS_LDRV_OFFSET 11 23 2.1
V_HS_LDRV_OFFSET1 15 14 2.1
V_IRCMP 25 18 0.2
.ends LTC3406B_DRIVER

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_PFET.sxcmp
.subckt LTC3406B_PFET 6 5 4
*#hierarchy
.NODE_MAP SOURCE 4
.NODE_MAP GATE 5
.NODE_MAP DRAIN 6
CGS 4 5 10p
!R$R_DBODY 6 4 R_DBODY$TP_SSPWLR IC=1 
.MODEL R_DBODY$TP_SSPWLR VPWLR NSEG=2 X0=0 Y0=0 X1=0.7 Y1=0.07u X2=0.8 Y2=250m 
RGS 4 5 1Meg
X$S_FET 4 6 4 5 SIMPLIS_VC_QSWITCH vars: ROFF=10Meg RSAT=400m TH=1 HYSTWD=200m VSAT=0 GAIN=10 IC='OPEN' LOGIC='POS' IFLOW='Bi-directional' POLARITY='Positive' LEVEL=1
.ends LTC3406B_PFET

** From D:\customer.simplistechnologies.com\examples\external\LTC3406B Hierarchical POP Trigger\Modeling Blocks\LTC3406B_NFET.sxcmp
.subckt LTC3406B_NFET 6 5 4
*#hierarchy
.NODE_MAP SOURCE 6
.NODE_MAP GATE 5
.NODE_MAP DRAIN 4
CGS 5 6 10p
!R$R_DBODY 6 4 R_DBODY$TP_SSPWLR IC=1 
.MODEL R_DBODY$TP_SSPWLR VPWLR NSEG=2 X0=0 Y0=0 X1=0.7 Y1=0.07u X2=0.8 Y2=250m 
RGS 5 6 1Meg
X$S_FET 4 6 5 6 SIMPLIS_VC_QSWITCH vars: ROFF=10Meg RSAT=400m TH=1 HYSTWD=200m VSAT=0 GAIN=10 IC='OPEN' LOGIC='POS' IFLOW='Bi-directional' POLARITY='Positive' LEVEL=1
.ends LTC3406B_NFET

.END
